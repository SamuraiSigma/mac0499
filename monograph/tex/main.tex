\documentclass[12pt,twoside,a4paper]{book}

% Add preamble
\input{tex/preamble}

% ---------------------------------------------------------------------
% Additional packages

\usepackage{setspace}    % Flexible spacing
\usepackage{makeidx}     % Index
\usepackage{tocbibind}   % Add bibliography/index/content to ToC
\usepackage{courier}     % Adobe Courier instead of Computer Modern Typewriter
\usepackage{type1cm}     % Scalable fonts
\usepackage{setspace}    % Spacing between lines
\usepackage{titletoc}
\usepackage[fixlanguage]{babelbib}
\usepackage[font=small,format=plain,labelfont=bf,up,textfont=it,up]{caption}

% Margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=3cm,right=2cm]{geometry}

% Solve hyperref and chapter problem
\usepackage[all]{hypcap}

% Textual bibliography quote
\usepackage[round,sort,nonamebreak]{natbib}

% Add metadata to PDF
\hypersetup{
    pdfauthor = {Leonardo Pereira Macedo},
    pdftitle = {Desenvolvimento de um módulo para Godot},
    pdfsubject = {Trabalho de Conclusão de Curso - IME-USP},
    pdfkeywords = {software, game engine, Godot, desenvolvimento de módulo,
                   reconhecimento de voz},
    pdfpagemode = UseOutlines
}

\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}

% Paragraph indent size
% \setlength{\parindent}{2cm}

% Spacing between paragraphs
% \setlength{\parskip}{0.25cm}

% ---------------------------------------------------------------------
% Nice headers

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\MakeUppercase{#1}}{}}
\renewcommand{\headrulewidth}{0pt}

% ---------------------------------------------------------------------

\urlstyle{same}  % URL with same style as text and not monospaced
\makeindex
\raggedbottom    % Disallow extra spaces in text
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}
\cleardoublepage
\normalsize

% ---------------------------------------------------------------------
% C++ code
% Ref: http://en.wikibooks.org/wiki/LaTeX/Packages/Listings

\lstset{
language=C++,                   % Language of the code
basicstyle=\footnotesize,       % Code font size
numbers=left,                   % Where to put line numbers
numberstyle=\footnotesize,      % Line number font size
stepnumber=1,                   % Step between two line numbers
numbersep=5pt,                  % How far line numbers are from the code
showspaces=false,               % Show spaces adding particular underscores
showstringspaces=false,         % Underline spaces within strings
showtabs=false,                 % Show tabs within strings
frame=single,                   % Adds a frame around the code
framerule=0.6pt,
tabsize=2,                      % Sets default tabsize to 2 spaces
captionpos=b,                   % Sets caption position to bottom
breaklines=true,                % Sets automatic line breaking
breakatwhitespace=false,        % Automatic breaks should only happen at whitespace?
escapeinside={\%*}{*)},         % For adding a comment within the code
backgroundcolor=\color[rgb]{1.0,1.0,1.0},
rulecolor=\color[rgb]{0.8,0.8,0.8},
extendedchars=true,
xleftmargin=10pt,
xrightmargin=10pt,
framexleftmargin=10pt,
framexrightmargin=10pt
}

% =====================================================================
% Document initial pages

\begin{document}

\frontmatter
% Header for pages in sections before chapter 1
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}
\setcounter{tocdepth}{2}
\fancyhead[LE]{\thepage\hspace{2em}\footnotesize{\leftmark}}
\fancyhead[RE,LO]{}
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}
\linespread{1.25}

\pagenumbering{gobble}
\hypersetup{pageanchor=false}
\input{tex/cover}
\input{tex/title}

\hypersetup{pageanchor=true}
\pagenumbering{roman}
\input{tex/thanks}
\input{tex/abstract}

{
\hypersetup{linkcolor=black}
\tableofcontents
\listoffigures
\listoftables
}

% ---------------------------------------------------------------------
% Document main body

\mainmatter
\pagenumbering{arabic}

% Header for all pages in chapters
\fancyhead[RE,LO]{\thesection}
\onehalfspacing

% Add chapters here
% \input{tex/introduction}
\input{tex/structure-of-speech}
% \input{tex/speech-libs}

% ---------------------------------------------------------------------
% Appendix

% Header
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\appendixname\ \thechapter}} {\MakeUppercase{#1}} }
\fancyhead[RE,LO]{}
\appendix

% Add appendix files here

% ---------------------------------------------------------------------
% Bibliography

\backmatter \onehalfspacing
\bibliographystyle{bib/plainnat-ime}  % Textual bibliographic quote

% Add bibliography files here
% \bibliography{bib/reference}

% ---------------------------------------------------------------------
% Index

% \index{TBP|see{periodicidade região codificante}}
% \index{DSP|see{processamento digital de sinais}}
% \index{STFT|see{transformada de Fourier de tempo reduzido}}
% \index{DFT|see{transformada discreta de Fourier}}
% \index{Fourier!transformada|see{transformada de Fourier}}

% \printindex  % imprime o índice remissivo no documento

% ---------------------------------------------------------------------

\end{document}
